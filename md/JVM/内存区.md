Java虚拟机在Java程序运行时会把它所管理的内存空间划分成若干不同的数据区

# 程序计数器

**线程隔离**

一块较小的内存空间，可以看作是当前线程所执行的字节码的行号指示器

# Java虚拟机栈

**线程隔离**

和Java内存模型有关的一个区域。

每个线程都有一个对应的栈，这个栈中又会有许多个栈帧，每个栈帧都是和一个个方法对应起来的，运行一个方法就会创建一个栈帧。

栈帧用于存储局部变量表、操作数栈、动态链接、方法出口等信息。

局部变量表存放了编译器可知的各种基本类型数据、对象引用和returnAddress类型。

每当一个方法执行完成时，这个栈帧会弹出栈顶的元素作为返回值，并且会清除这个栈帧。同时，栈顶的栈帧就是当前正在执行的方法。

# 本地方法栈

和前面的Java虚拟机栈类似，区别是虚拟机栈为虚拟机执行Java方法服务，而本地方法栈为虚拟机用到的Native方法服务

# Java堆

**所有线程共享**

对于大多数应用，Java堆是虚拟机所管理的内存中最大的一块，在虚拟机启动时创建。

堆是存储Java对象的地方，几乎所有的对象实例都在这里分配内存。

Java堆是垃圾收集器管理的主要区域

# 方法区

**这货也是Java堆的一部分**

方法区是用于存储类结构信息的地方。比如被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据

经常被叫做永久代

这货存储的信息比较稳定，不会像上面的堆那样天天被GC，不过仍然会被垃圾收集器管理

# 运行时常量池

**这货是方法区的一部分**

Class文件中除了有类的版本、字段、方法等描述信息外，还有一项信息是常量池，用于存放编译器生成的各种字面量和符号引用，这部分类容在类加载后进入这里存放
